<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>simple_validation - Fluent Data Validation for Eiffel</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/png" href="images/logo.png">
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="images/logo.png" alt="simple_* logo" class="logo">
        </div>
        <h1>simple_validation</h1>
        <p class="tagline">Fluent Data Validation for Eiffel</p>
        <div class="badges">
            <span class="badge badge-version">v1.0</span>
            <span class="badge badge-license">MIT</span>
        </div>
    </header>

    <nav>
        <ul>
            <li><a href="#features">Features</a></li>
            <li><a href="quick.html">QUICK API</a></li>
            <li><a href="#quickstart">Quick Start</a></li>
            <li><a href="#rules">Validation Rules</a></li>
            <li><a href="api/simple_validator.html">API Reference</a></li>
        </ul>
    </nav>

    <main>
        <section id="features">
            <h2>Features</h2>
            <ul>
                <li><strong>Fluent API</strong> - Chain validation rules naturally with readable syntax</li>
                <li><strong>HTML5 Constraints</strong> - Required, min/max length, pattern matching</li>
                <li><strong>Numeric Validation</strong> - Min/max values, integer checks</li>
                <li><strong>Format Validation</strong> - Email, URL, alpha, alphanumeric patterns</li>
                <li><strong>Custom Rules</strong> - Add your own validation logic with agents</li>
                <li><strong>Rich Error Messages</strong> - Detailed error information with field names</li>
                <li><strong>Design by Contract</strong> - Full preconditions and postconditions</li>
            </ul>
        </section>

        <section id="quickstart">
            <h2>Quick Start</h2>

            <h3>Installation</h3>
            <p>Add to your ECF:</p>
            <pre><code>&lt;library name="simple_validation" location="$SIMPLE_EIFFEL/simple_validation/simple_validation.ecf"/&gt;</code></pre>

            <h3>Basic Validation</h3>
            <pre><code>local
    validator: SIMPLE_VALIDATOR
    result: VALIDATION_RESULT
do
    create validator.make

    -- Validate an email
    result := validator.required.email.for_field ("email").validate ("user@example.com")

    if result.is_valid then
        io.put_string ("Valid!%N")
    else
        io.put_string (result.to_string)
    end
end</code></pre>

            <h3>Chaining Rules</h3>
            <pre><code>local
    validator: SIMPLE_VALIDATOR
    result: VALIDATION_RESULT
do
    create validator.make

    -- Username: 3-20 chars, alphanumeric only
    result := validator.required
        .length_between (3, 20)
        .alpha_numeric
        .for_field ("username")
        .validate ("john_doe123")
end</code></pre>

            <h3>Form Validation</h3>
            <pre><code>validate_user_form (username, email, age: STRING): VALIDATION_RESULT
    local
        v1, v2, v3: SIMPLE_VALIDATOR
        r1, r2, r3: VALIDATION_RESULT
    do
        create Result.make_valid

        -- Username: 3-20 chars, alphanumeric
        create v1.make
        r1 := v1.required.length_between (3, 20).alpha_numeric
            .for_field ("username").validate (username)
        Result.merge (r1)

        -- Email: required, valid format
        create v2.make
        r2 := v2.required.email.for_field ("email").validate (email)
        Result.merge (r2)

        -- Age: required, integer, 18-120
        create v3.make
        r3 := v3.required.is_integer.value_between (18.0, 120.0)
            .for_field ("age").validate (age)
        Result.merge (r3)
    end</code></pre>
        </section>

        <section id="rules">
            <h2>Validation Rules</h2>

            <h3>String Validation</h3>
            <table>
                <thead>
                    <tr>
                        <th>Rule</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>required</code></td>
                        <td>Value must not be empty</td>
                    </tr>
                    <tr>
                        <td><code>min_length (n)</code></td>
                        <td>Minimum character count</td>
                    </tr>
                    <tr>
                        <td><code>max_length (n)</code></td>
                        <td>Maximum character count</td>
                    </tr>
                    <tr>
                        <td><code>length_between (min, max)</code></td>
                        <td>Length within range</td>
                    </tr>
                    <tr>
                        <td><code>pattern (regex)</code></td>
                        <td>Match regular expression</td>
                    </tr>
                </tbody>
            </table>

            <h3>Format Validation</h3>
            <table>
                <thead>
                    <tr>
                        <th>Rule</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>email</code></td>
                        <td>Valid email format</td>
                    </tr>
                    <tr>
                        <td><code>url</code></td>
                        <td>Valid URL format</td>
                    </tr>
                    <tr>
                        <td><code>alpha</code></td>
                        <td>Letters only (A-Za-z)</td>
                    </tr>
                    <tr>
                        <td><code>alpha_numeric</code></td>
                        <td>Letters and digits only</td>
                    </tr>
                </tbody>
            </table>

            <h3>Numeric Validation</h3>
            <table>
                <thead>
                    <tr>
                        <th>Rule</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>min_value (n)</code></td>
                        <td>Minimum numeric value</td>
                    </tr>
                    <tr>
                        <td><code>max_value (n)</code></td>
                        <td>Maximum numeric value</td>
                    </tr>
                    <tr>
                        <td><code>value_between (min, max)</code></td>
                        <td>Value within range</td>
                    </tr>
                    <tr>
                        <td><code>is_integer</code></td>
                        <td>Must be a whole number</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="errors">
            <h2>Error Handling</h2>
            <p>Each <code>VALIDATION_ERROR</code> contains:</p>
            <ul>
                <li><code>code</code> - Error type (e.g., "required", "min_length")</li>
                <li><code>message</code> - Human-readable message</li>
                <li><code>field_name</code> - Optional field name</li>
                <li><code>constraint</code> - The constraint that failed</li>
                <li><code>actual_value</code> - The value that failed validation</li>
            </ul>
            <pre><code>if result.has_errors then
    across result.errors as err loop
        io.put_string (err.full_message + "%N")
    end
end</code></pre>
        </section>

        <section id="custom">
            <h2>Custom Rules</h2>
            <pre><code>-- Add custom validation logic
validator.custom (agent my_validation_function)

my_validation_function (value: STRING): BOOLEAN
    do
        Result := value.count > 3 and value.starts_with ("user_")
    end</code></pre>
        </section>

        <section id="inspiration">
            <h2>Design Inspiration</h2>
            <ul>
                <li><a href="https://developer.mozilla.org/en-US/docs/Learn/Forms/Form_validation">HTML5 Constraint Validation API</a></li>
                <li><a href="https://json-schema.org/understanding-json-schema/reference/string.html">JSON Schema Validation</a></li>
                <li>Fluent interface pattern for readable validation chains</li>
            </ul>
        </section>
    </main>

    <footer>
        <p>
            <a href="api/simple_validator.html">API Reference</a> |
            <a href="https://github.com/simple-eiffel/simple_validation">GitHub</a>
        </p>
        <p class="copyright">
            Copyright &copy; 2024-2025 Larry Rix. MIT License.
        </p>
    </footer>
</body>
</html>
